# PRÁCTICA 4 — Autenticación y permisos

## Objetivo

Restringir quién puede modificar recursos.

---

## Paso 1 — Configurar permisos globales

En `settings.py`:

```python
REST_FRAMEWORK = {
    'DEFAULT_PERMISSION_CLASSES': [
        'rest_framework.permissions.IsAuthenticatedOrReadOnly',
    ]
}
```

Esto permite:

* GET para cualquiera
* POST/PUT/DELETE solo autenticados

---

## Paso 2 — Probar comportamiento

* Sin login → POST debe devolver 401 o 403
* Con login → POST permitido

---

## Paso 3 — Permiso personalizado

Crear `permissions.py`:

```python
from rest_framework.permissions import BasePermission, SAFE_METHODS

class IsAdminOrReadOnly(BasePermission):
    def has_permission(self, request, view):
        if request.method in SAFE_METHODS:
            return True
        return request.user and request.user.is_staff
```

Aplicarlo en el ViewSet:

```python
from .permissions import IsAdminOrReadOnly

class ProductoViewSet(viewsets.ModelViewSet):
    queryset = Producto.objects.all()
    serializer_class = ProductoSerializer
    permission_classes = [IsAdminOrReadOnly]
```

---

## Paso 4 — Verificar comportamiento

* Usuario normal → solo lectura
* Admin → puede crear, editar y borrar

---
